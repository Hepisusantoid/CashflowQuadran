<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Cashflow Kuadran Monitor</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Style -->
    <link rel="stylesheet" href="assets/style.css" />

    <!-- ChartJS -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <!-- ================= LOGIN SECTION ================= -->
    <section id="loginSection" class="card">
        <div class="login-card-title">Login Admin</div>
        <div class="login-desc">
            Hanya kamu yang boleh masuk. Setelah login, kamu bisa lihat grafik kuadran,
            tambah penghasilan, dan hapus data.
        </div>

        <div id="loginError" class="login-error-msg">
            Username / password salah. Perhatikan huruf besar-kecil.
        </div>

        <form id="loginForm">
            <div class="form-group">
                <label for="loginUser">Username</label>
                <input
                    id="loginUser"
                    type="text"
                    placeholder="username admin"
                    autocomplete="username"
                    autocapitalize="none"
                    autocorrect="off"
                    spellcheck="false"
                    required
                />
            </div>

            <div class="form-group">
                <label for="loginPass">Password</label>
                <input
                    id="loginPass"
                    type="password"
                    placeholder="password admin"
                    autocomplete="current-password"
                    autocapitalize="none"
                    autocorrect="off"
                    spellcheck="false"
                    required
                />
            </div>

            <button type="submit" style="width:100%;margin-top:8px;">Masuk</button>

            <div class="note" style="margin-top:12px;">
                Catatan keamanan: password ini dicek di server (folder /api),
                jadi tidak kelihatan di browser orang lain.
            </div>
        </form>
    </section>


    <!-- ================= DASHBOARD SECTION ================= -->
    <section id="dashboardSection" class="hidden">

        <!-- Topbar -->
        <div class="topbar card">
            <div>
                <div class="topbar-title">Cashflow Kuadran Monitor</div>
                <div class="topbar-sub">Pantau sumber penghasilanmu (E / S / B / I)</div>
            </div>
            <button id="logoutBtn" class="btn-outline" type="button">Logout</button>
        </div>

        <!-- ===== RINGKASAN KUADRAN TAHUN TERBARU ===== -->
        <div class="card">
            <div class="summary-header">
                <div class="left">
                    <div class="title">Ringkasan Penghasilan</div>
                    <div class="sub">Per Kuadran (Tahun terbaru)</div>
                </div>
                <div class="year-label" id="summaryYear">-</div>
            </div>

            <div class="summary-grid">
                <div class="sum-card" id="cardE">
                    <div class="sum-label">
                        <span class="quad">E - Employee/Karyawan</span>
                        <span class="sum-percent" id="percentE">0%</span>
                    </div>
                    <div class="sum-amount" id="amountE">Rp0</div>
                </div>

                <div class="sum-card" id="cardS">
                    <div class="sum-label">
                        <span class="quad">S - Self Employed</span>
                        <span class="sum-percent" id="percentS">0%</span>
                    </div>
                    <div class="sum-amount" id="amountS">Rp0</div>
                </div>

                <div class="sum-card" id="cardB">
                    <div class="sum-label">
                        <span class="quad">B - Business / Sistem Jalan Sendiri</span>
                        <span class="sum-percent" id="percentB">0%</span>
                    </div>
                    <div class="sum-amount" id="amountB">Rp0</div>
                </div>

                <div class="sum-card" id="cardI">
                    <div class="sum-label">
                        <span class="quad">I - Investor / Aset</span>
                        <span class="sum-percent" id="percentI">0%</span>
                    </div>
                    <div class="sum-amount" id="amountI">Rp0</div>
                </div>
            </div>
        </div>

        <!-- ===== CHARTS ===== -->
        <div class="chart-grid">

            <!-- Donut Chart -->
            <div class="card">
                <div class="chart-card-header">
                    <span>Komposisi Kuadran</span>
                    <span style="font-size:.7rem;color:var(--text-dim);">
                        Tahun <span id="donutYearLabel">-</span>
                    </span>
                </div>

                <div class="chart-wrapper">
                    <canvas id="donutChart"></canvas>
                </div>

                <div class="legend-box" id="donutLegend"></div>
            </div>

            <!-- Line Chart -->
            <div class="card">
                <div class="chart-card-header">
                    <span>Performa Kuadran per Tahun</span>
                    <span style="font-size:.7rem;color:var(--text-dim);">
                        Total penghasilan per kuadran (Rp)
                    </span>
                </div>

                <div class="chart-wrapper">
                    <canvas id="lineChart"></canvas>
                </div>

                <div class="note" style="margin-top:12px;">
                    Grafik ini nunjukin seberapa kuat masing-masing kuadran (E, S, B, I)
                    dari tahun ke tahun. Naik = kuadran itu makin dominan di hidupmu.
                </div>
            </div>
        </div>

        <!-- ===== FORM TAMBAH PENGHASILAN ===== -->
        <div class="card">
            <div class="section-title">
                <span>Tambah Penghasilan (Admin Panel)</span>
                <span style="font-size:.7rem;color:var(--text-dim);">Data baru langsung disimpan</span>
            </div>

            <form id="addIncomeForm">

                <div class="form-row-2col">
                    <div class="form-group">
                        <label for="yearInput">Tahun</label>
                        <input id="yearInput" type="number" placeholder="contoh: 2025" required />
                    </div>

                    <div class="form-group">
                        <label for="quadrantInput">Kuadran</label>
                        <select id="quadrantInput" required>
                            <option value="">Pilih kuadran...</option>
                            <option value="E">E - Employee / Karyawan</option>
                            <option value="S">S - Self Employed / Kerja Sendiri</option>
                            <option value="B">B - Business / Bisnis Jalan Tanpa Kamu</option>
                            <option value="I">I - Investor / Aset Investasi</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="sectorInput">Sektor / Sumber</label>
                    <input id="sectorInput" type="text" placeholder="contoh: Pertanian, Crypto, PPOB, Sewa ruko..." required />
                </div>

                <div class="form-group">
                    <label for="amountInput">Nominal per Tahun (Rp)</label>
                    <input id="amountInput" type="text" inputmode="numeric" placeholder="100.000.000" required />
                    <div class="note">
                        Otomatis pakai titik pemisah ribuan.
                        Masukkan total setahun untuk sumber ini.
                    </div>
                </div>

                <button type="submit" style="width:100%;margin-top:8px;">+ Tambah Data</button>

            </form>
        </div>

        <!-- ===== TABEL DATA ===== -->
        <div class="card">
            <div class="section-title">
                <span>Data Semua Penghasilan</span>
                <span style="font-size:.7rem;color:var(--text-dim);">Swipe kanan-kiri kalau tabel melebar</span>
            </div>

            <div class="table-wrapper">
                <table id="incomeTable">
                    <thead>
                        <tr>
                            <th>Tahun</th>
                            <th>Kuadran</th>
                            <th>Sektor</th>
                            <th>Nominal (Rp)</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- baris data via JS -->
                    </tbody>
                </table>
            </div>

            <div class="note" style="margin-top:12px;">
                Kuadran:
                E = Employee/Karyawan,
                S = Self-Employed (kamu kerja sendiri, contoh tani harian),
                B = Business (punya sistem & orang jalanin),
                I = Investor (uang kerja buat kamu).
            </div>
        </div>
    </section>

    <!-- App JS -->
    <script src="assets/app.js"></script>
</body>
</html>
