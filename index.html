<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Cashflow Kuadran Monitor</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/style.css" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <!-- ============ LOGIN ============ -->
    <section id="loginSection" class="card card-glow">
        <div class="login-card-title">Login Admin</div>
        <div class="login-desc">
            Masuk dulu untuk lihat income per kuadran (E / S / B / I),
            tambah data, edit, dan hapus.
        </div>

        <div id="loginError" class="login-error-msg">
            Username / password salah.
        </div>

        <form id="loginForm">
            <div class="form-group">
                <label for="loginUser">Username</label>
                <input
                    id="loginUser"
                    type="text"
                    placeholder="username admin"
                    autocomplete="username"
                    autocapitalize="none"
                    autocorrect="off"
                    spellcheck="false"
                    required
                />
            </div>

            <div class="form-group">
                <label for="loginPass">Password</label>
                <input
                    id="loginPass"
                    type="password"
                    placeholder="password admin"
                    autocomplete="current-password"
                    autocapitalize="none"
                    autocorrect="off"
                    spellcheck="false"
                    required
                />
            </div>

            <button type="submit" class="btn-full">Masuk</button>

            <div class="note" style="margin-top:12px;">
                Password dicek di server (folder /api), jadi aman di luar browser publik.
            </div>
        </form>
    </section>


    <!-- ============ DASHBOARD ============ -->
    <section id="dashboardSection" class="hidden">

        <!-- TOP BAR -->
        <div class="card card-glow soft-space topbar-card">
            <div class="topbar-left">
                <div class="topbar-title">Cashflow Kuadran Monitor</div>
                <div class="topbar-sub">
                    Pantau sumber penghasilanmu (E / S / B / I)
                </div>
            </div>
            <button id="logoutBtn" class="btn-outline-pill" type="button">Logout</button>
        </div>

        <!-- RINGKASAN KUADRAN TAHUN TERBARU -->
        <div class="card card-glow soft-space">
            <div class="summary-header">
                <div class="left">
                    <div class="title">Ringkasan Penghasilan</div>
                    <div class="sub">Per Kuadran (Tahun terbaru)</div>
                </div>
                <div class="year-pill" id="summaryYear">-</div>
            </div>

            <div class="summary-grid">
                <div class="sum-card">
                    <div class="sum-head-row">
                        <span class="quad">E - Employee/Karyawan</span>
                        <span class="sum-percent" id="percentE">0%</span>
                    </div>
                    <div class="sum-inner">
                        <div class="sum-amount" id="amountE">Rp0</div>
                    </div>
                </div>

                <div class="sum-card">
                    <div class="sum-head-row">
                        <span class="quad">S - Self Employed</span>
                        <span class="sum-percent" id="percentS">0%</span>
                    </div>
                    <div class="sum-inner">
                        <div class="sum-amount" id="amountS">Rp0</div>
                    </div>
                </div>

                <div class="sum-card">
                    <div class="sum-head-row">
                        <span class="quad">B - Business / Sistem Jalan Sendiri</span>
                        <span class="sum-percent" id="percentB">0%</span>
                    </div>
                    <div class="sum-inner">
                        <div class="sum-amount" id="amountB">Rp0</div>
                    </div>
                </div>

                <div class="sum-card">
                    <div class="sum-head-row">
                        <span class="quad">I - Investor / Aset</span>
                        <span class="sum-percent" id="percentI">0%</span>
                    </div>
                    <div class="sum-inner">
                        <div class="sum-amount" id="amountI">Rp0</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- DONUT CHART -->
        <div class="card card-glow soft-space">
            <div class="chart-header-row">
                <div class="chart-title">Komposisi Kuadran</div>
                <div class="chart-sub">
                    Tahun <span id="donutYearLabel">-</span>
                </div>
            </div>

            <div class="donut-flexbox">
                <div class="chart-wrapper-donut">
                    <canvas id="donutChart"></canvas>
                </div>

                <div class="donut-legend-grid" id="donutLegend">
                    <!-- diisi JS -->
                </div>
            </div>
        </div>

        <!-- LINE CHART -->
        <div class="card card-glow soft-space">
            <div class="chart-header-row">
                <div class="chart-title">Performa Kuadran per Tahun</div>
                <div class="chart-sub">Total penghasilan per kuadran (Rp)</div>
            </div>

            <div class="line-legend-row">
                <span class="legend-chip"><span class="chip-dot" style="background:#4ade80;"></span>E</span>
                <span class="legend-chip"><span class="chip-dot" style="background:#22c55e;"></span>S</span>
                <span class="legend-chip"><span class="chip-dot" style="background:#0ea5e9;"></span>B</span>
                <span class="legend-chip"><span class="chip-dot" style="background:#a855f7;"></span>I</span>
            </div>

            <div class="chart-wrapper-line">
                <canvas id="lineChart"></canvas>
            </div>

            <div class="note" style="margin-top:12px;">
                Garis naik = kuadran itu makin dominan income-nya per tahun.
            </div>
        </div>

        <!-- FORM TAMBAH / EDIT DATA -->
        <div class="card card-glow soft-space">
            <div class="section-title-row">
                <div class="section-main">Kelola Penghasilan (Admin)</div>
                <div class="section-sub">Tambah baru / Edit / Simpan</div>
            </div>

            <form id="incomeForm">
                <!-- hidden id utk edit -->
                <input type="hidden" id="editId" value="" />

                <div class="form-row-2col">
                    <div class="form-group">
                        <label for="yearInput">Tahun</label>
                        <input id="yearInput" type="number" placeholder="contoh: 2025" required />
                    </div>

                    <div class="form-group">
                        <label for="quadrantInput">Kuadran</label>
                        <select id="quadrantInput" required>
                            <option value="">Pilih kuadran...</option>
                            <option value="E">E - Employee / Karyawan</option>
                            <option value="S">S - Self Employed / Kerja Sendiri</option>
                            <option value="B">B - Business / Bisnis Jalan Tanpa Kamu</option>
                            <option value="I">I - Investor / Aset Investasi</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="sectorInput">Sektor / Sumber</label>
                    <input id="sectorInput" type="text" placeholder="contoh: Pertanian, Crypto, PPOB, Sewa ruko..." required />
                </div>

                <div class="form-group">
                    <label for="amountInput">Nominal per Tahun (Rp)</label>
                    <input id="amountInput" type="text" inputmode="numeric" placeholder="100.000.000" required />
                    <div class="note">
                        Otomatis pakai titik ribuan. Masukkan total setahun dari sumber ini.
                    </div>
                </div>

                <button type="submit" class="btn-full" id="saveBtnLabel">+ Tambah Data</button>

                <button type="button" class="btn-cancel-edit hidden" id="cancelEditBtn">
                    Batal Edit
                </button>
            </form>
        </div>

        <!-- TABEL DATA -->
        <div class="card card-glow soft-space">
            <div class="section-title-row">
                <div class="section-main">Data Semua Penghasilan</div>
                <div class="section-sub">Swipe kanan-kiri kalau tabel melebar</div>
            </div>

            <div class="table-wrapper">
                <table id="incomeTable">
                    <thead>
                        <tr>
                            <th>Tahun</th>
                            <th>Kuadran</th>
                            <th>Sektor</th>
                            <th>Nominal (Rp)</th>
                            <th style="min-width:90px;">Aksi</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- baris data via JS -->
                    </tbody>
                </table>
            </div>

            <div class="note" style="margin-top:12px;">
                E = Employee/Karyawan<br/>
                S = Self-Employed (kamu kerja sendiri)<br/>
                B = Business (punya sistem & orang jalanin)<br/>
                I = Investor (uang kerja buat kamu)
            </div>
        </div>
    </section>

    <script src="assets/app.js"></script>
</body>
</html>
